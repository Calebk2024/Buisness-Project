<html>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
<head>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <title>Expense Tracker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: white;
            text-align: center;
        }
        nav {
            background-color: black;
            overflow: hidden;
        }
    
        nav a {
            float: left;
            display: block;
            color: white;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
        }
    
        nav a:hover {
            background-color: #ddd;
            color:blue;
        }
    </style>
</head>
<body>
    <nav>
        <a href="index.html">Back to homepage</a>
        <a href="user.html">User Logging</a>
    </nav>
<div id="expense-chart"></div>

<script>
    var food = 0;
    var enter= 0;
    var house = 0;
    var trans=0;
    var util=0;
    var o=0;
    var myArray = JSON.parse(localStorage.getItem("myArray")) || [];
    console.log(myArray);
    for (var i = 0; i < myArray.length; i++){
        if(myArray[i]["category"]=="food"){
            food+=parseFloat(myArray[i]["amount"]);
        }
        if(myArray[i]["category"]=="housing"){
            house+=parseFloat(myArray[i]["amount"]);
        }
        if(myArray[i]["category"]=="transportation"){
            trans+=parseFloat(myArray[i]["amount"]);
        }
        if(myArray[i]["category"]=="utilities"){
            util+=parseFloat(myArray[i]["amount"]);
        }
        if(myArray[i]["category"]=="entertainment"){
            enter+=parseFloat(myArray[i]["amount"]);
        }
        if(myArray[i]["category"]=="other"){
            o+=parseFloat(myArray[i]["amount"]);
        }
    }
    const expenses = [
        { category: 'Food', amount: food},
        { category: 'Transportation', amount: trans},
        { category: 'Entertainment', amount: enter},
        { category: 'Utilities', amount: util },
        { category: 'Housing', amount: house },
        { category: 'Other', amount:o}
    ];
    const categories = expenses.map(expense => expense.category);
    const amounts = expenses.map(expense => expense.amount);

    const data = [{
        type: 'bar',
        x: categories,
        y: amounts,
        marker: {
            color: "rgb(0,0,0)",
            opacity: 0.7,
        }
    }];

    const layout = {
        title: 'Expense Tracked per Category',
        xaxis: { title: 'Expense Category' },
        yaxis: { title: 'Expense Amount ($)'}
    };

    Plotly.newPlot('expense-chart', data, layout);
    
</script>

</body>
</html>

