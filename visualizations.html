<html>
<head>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <title>Expense Tracker</title>
    <style>
        body {
                font-family: Arial, sans-serif;
                margin: 0;
                padding: 0;
                background-color: #f4f4f4;
                text-align: center;
        }
        nav {
            background-color: #333;
            overflow: hidden;
        }
    
        nav a {
            float: left;
            display: block;
            color: #fff;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
        }
    
        nav a:hover {
            background-color: #ddd;
            color:blue;
        }
    </style>
</head>
<body>
    <nav>
        <a href="index.html">Back to homepage</a>
    </nav>
<div id="expense-chart"></div>

<script>
    var food = 0;
    var enter= 0;
    var house = 0;
    var trans=0;
    var util=0;
    var myArray = JSON.parse(localStorage.getItem("myArray")) || [];
    console.log(myArray);
    for (var i = 0; i < myArray.length; i++){
        if(myArray[i]["category"]=="food"){
            food+=parseFloat(myArray[i]["amount"]);
        }
        if(myArray[i]["category"]=="housing"){
            house+=parseFloat(myArray[i]["amount"]);
        }
        if(myArray[i]["category"]=="transportation"){
            trans+=parseFloat(myArray[i]["amount"]);
        }
        if(myArray[i]["category"]=="utilities"){
            util+=parseFloat(myArray[i]["amount"]);
        }
        if(myArray[i]["category"]=="entertainment"){
            enter+=parseFloat(myArray[i]["amount"]);
        }
    }
    console.log(food);
    const expenses = [
        { category: 'Food', amount: food},
        { category: 'Transportation', amount: enter},
        { category: 'Entertainment', amount: house },
        { category: 'Utilities', amount: trans },
        { category: 'Housing', amount: util }
    ];
    const categories = expenses.map(expense => expense.category);
    const amounts = expenses.map(expense => expense.amount);

    const data = [{
        type: 'bar',
        x: categories,
        y: amounts,
        marker: {
            color: 'rgb(55, 83, 109)',
            opacity: 0.7,
        }
    }];

    const layout = {
        title: 'Expense Tracker',
        xaxis: { title: 'Expense Category' },
        yaxis: { title: 'Expense Amount ($)'}
    };

    Plotly.newPlot('expense-chart', data, layout);
    
</script>

</body>
</html>

